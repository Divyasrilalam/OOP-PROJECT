(self.webpackChunkcompress2go=self.webpackChunkcompress2go||[]).push([[3858],{3171:function(t,e,r){"use strict";r.d(e,{F:function(){return u}});r(2564),r(2526),r(1817),r(1539),r(2165),r(6992),r(8783),r(3948);var n=r(5684),a=r(7555),i=r(9488),o=r(9755);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(t){this._logger=i.P,(0,a.jV)(t)&&(0,a.fN)(t,"logger")&&((0,n.t9)(t.logger.log),this._logger=t.logger)}u.prototype.ajax=function(t){(0,n.u)(t);var e=0;t.hasOwnProperty("maxRetries")&&((0,n.VW)(t.maxRetries),(0,n.GY)(t.maxRetries>=0),e=t.maxRetries),t.hasOwnProperty("timeout")?((0,n.VW)(t.timeout),(0,n.GY)(t.timeout>=0)):t.timeout=59e3,!t.hasOwnProperty("method")&&t.hasOwnProperty("type")&&(t.method=t.type),t.hasOwnProperty("method")||(t.method="GET");var r=!1,a=!1,i=!0,s=!0;t.hasOwnProperty("retryTimeout")&&((0,n.Xy)(t.retryTimeout),r=t.retryTimeout),t.hasOwnProperty("retry400")&&((0,n.Xy)(t.retry400),a=t.retry400),t.hasOwnProperty("retry500")&&((0,n.Xy)(t.retry500),i=t.retry500),t.hasOwnProperty("retryOther")&&((0,n.Xy)(t.retryOther),s=t.retryOther),t.hasOwnProperty("cache")||(t.cache=!1);var u=0,l=o.Deferred(),c=this._logger;return function f(){var p=Date.now();function h(o,h,d){var y=(Date.now()-p)/1e3;function m(e){c.log(e,{url:t.url,ajax_status:h,ajax_error:d,http_status:o.status,http_method:t.method,duration_s:y})}if(402===o.status)return m("qgAjaxWrapper - with retry - fail - 402 payment required"),void l.reject(o,h,d);var g=u<e,v="timeout"===h,j=o.status>=400&&o.status<500,x=o.status>=500&&o.status<600;if(v){if(!r||!g)return m("qgAjaxWrapper - with retry - fail - timeout - final"),void l.reject(o,h,d);m("qgAjaxWrapper - with retry - fail - timeout - retry")}else if(j){if(!a||!g)return m("qgAjaxWrapper - with retry - fail - 4xx - final"),void l.reject(o,h,d);m("qgAjaxWrapper - with retry - fail - 4xx - retry")}else if(x){if(!i||!g)return m("qgAjaxWrapper - with retry - fail - 5xx - final"),void l.reject(o,h,d);m("qgAjaxWrapper - with retry - fail - 5xx - retry")}else{if(!s||!g)return m("qgAjaxWrapper - with retry - fail - other - final"),void l.reject(o,h,d);m("qgAjaxWrapper - with retry - fail - other - retry")}var w,_=function(t){(0,n.VW)(t),t<1&&(t=1);var e=t;return e>20&&(e=20),e}(u+=1);x&&(w=u,(0,n.VW)(w),w<1&&(w=1),_=w<3?10:20),setTimeout((function(){f()}),1e3*_)}o.ajax(t).done((function(e,r,n){var a=(Date.now()-p)/1e3;a>15&&c.log("qgAjaxWrapper - done - slow ajax call",{url:t.url,duration_s:a}),l.resolve(e,r,n)})).fail((function(r,n,a){e>0?h(r,n,a):function(e,r,n){var a,i=(Date.now()-p)/1e3,o="timeout"===r,s=402===e.status,u=e.status>=400&&e.status<500,f=e.status>=500&&e.status<600;a=o?"qgAjaxWrapper - no retry - fail - timeout":s?"qgAjaxWrapper - no retry - fail - 402 payment required":u?"qgAjaxWrapper - no retry - fail - 4xx":f?"qgAjaxWrapper - no retry - fail - 5xx":"qgAjaxWrapper - no retry - fail - other",c.log(a,{url:t.url,ajax_status:r,ajax_error:n,http_status:e.status,http_method:t.method,duration_s:i}),l.reject(e,r,n)}(r,n,a)}))}(),l},u.prototype.post=function(t){return t.method="POST",this.ajax(t)},u.prototype.postJson=function(t){return t.method="POST",t.contentType="application/json",t.processData=!1,"object"===s(t.data)&&(t.data=JSON.stringify(t.data)),this.ajax(t)},u.prototype.get=function(t){return t.method="GET",this.ajax(t)},u.prototype.delete=function(t){return t.method="DELETE",this.ajax(t)},u.prototype.patch=function(t){return t.method="PATCH",this.ajax(t)},u.prototype.getDefaultOptions=function(t){var e={data:{},xhrFields:{withCredentials:!0},cache:!1};return(0,a.Rt)(t)&&(e.url=t),e}},369:function(t,e,r){"use strict";r.d(e,{FK:function(){return n},QG:function(){return a},fE:function(){return i},hI:function(){return o},RU:function(){return s},cM:function(){return u},$7:function(){return l},ZH:function(){return c},sZ:function(){return f},Zf:function(){return p},u7:function(){return h},Cy:function(){return d},lV:function(){return y},rt:function(){return m},db:function(){return g},D$:function(){return v},DC:function(){return j},NW:function(){return x}});var n="api-error-broken-server-response",a="api-error-connection-problem",i="api-error-try-reload",o="api-error-EXCEPTION",s="api-error-invalid-api-key",u="api-error-invalid-conversion-options",l="api-error-job-can-not-be-mofified",c="api-error-job-not-found",f="api-error-file-too-large",p="uploader-error-too-many-inputs",h="api-error-youtube-forbidden",d="api-error-overuse",y="api-error-payment-required",m="api-error-unexpected-job-status",g="api-error-too-many-retries",v="api-error-unknown",j="api-error-not-implemented",x=[n,a,i,o,s,u,l,c,f,p,h,"uploader-error-no-upload-server",d,y,m,g,v,j]},3356:function(t,e,r){"use strict";r.d(e,{F:function(){return m}});r(3210),r(4916),r(7042),r(8309),r(9554),r(1539),r(4747),r(6699),r(2023),r(9826);var n=r(3171),a=r(1205),i=r(9488),o=r(3143),s=r(7555);r(369);function u(t){if(!function(t){return!!((0,s.jV)(t)&&(0,s.Hm)(t.roles)&&(0,s.Rb)(t.username)&&(0,s.jV)(t.extra))}(t))throw new Error((0,o.R)("not valid raw user data"))}var l=r(5684),c=r(9755);function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e&&p(t.prototype,e),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var d=function(){function t(e){var r=this;f(this,t),u(e),this.raw=e,this.name="",this.email="",this.isRegistered=!1,this.isProfessional=!1,this.isFromEurope=e.extra.europe,this.country=e.extra.country,this.socialError=null,this.sendInvoiceMail=!0,this.automatedDownloads=!0,this.isBusinessUser=!0===e.business_user,this.sendInvoiceMail=!0,this.constraints=null,(0,s.Hm)(e.constraints)&&(this.constraints=e.constraints),(0,s.Hm)(e.user_settings)&&e.user_settings.forEach((function(t){"sendInvoiceMail"===t.settings_key&&(r.sendInvoiceMail=(0,s.o5)(t.settings_value)),"automatedDownloads"===t.settings_key&&(r.automatedDownloads=(0,s.o5)(t.settings_value))})),(0,s.Rt)(e.extra.social_error)&&(this.socialError=e.extra.social_error),e.roles.includes("ROLE_USER")&&(this.isRegistered=!0,this.isProfessional=!1,this.name=e.username,(0,s.Rt)(e.plain_email)&&(this.email=e.plain_email)),e.roles.includes("ROLE_USER_PROFESSIONAL")&&(this.isRegistered=!0,this.isProfessional=!0,this.name=e.username,(0,s.Rt)(e.plain_email)&&(this.email=e.plain_email)),this.displayName=function(t,e){if((0,l.pX)(t),""===t.trim())return"";var r=t;(0,s.Rt)(e)&&(/^USER_[a-f0-9]{12}$/i.test(t)||/^PDF2GO_[a-f0-9]{12}$/i.test(t))&&(r=e);return r.length>23&&(r=r.slice(0,20)+"..."),r}(this.name,this.email)}return h(t,[{key:"getConstraintByName",value:function(t){return this.constraints.find((function(e){return e.ident===t}))}}]),t}(),y="__SESSION_STORAGE_USER__";var m=new(function(){function t(){f(this,t),this.callbacks=[],this.userData=null,this.isLoading=!1}return h(t,[{key:"_resolveAllCallbacks",value:function(t){for(var e=0;e<this.callbacks.length;e++)this.callbacks[e].resolve(t);this.callbacks=[]}},{key:"_rejectAllCallbacks",value:function(t){for(var e=0;e<this.callbacks.length;e++)this.callbacks[e].reject(t);this.callbacks=[]}},{key:"getUserData",value:function(){var t=this,e=c.Deferred();return null!==this.userData?(e.resolve(this.userData),e):this.isLoading?(this.callbacks.push(e),e):(this.isLoading=!0,function(){var t=c.Deferred();return(new n.F).get({url:a.f.getApiUrl("api/user/me"),dataType:"json",xhrFields:{withCredentials:!0},cache:!1,maxRetries:3}).done((function(e){var r=null;try{r=new d(e);var n="unregistered";r.isRegistered&&(n="registered"),r.isProfessional&&(n="professional");var a="qgrole="+n+"; max-age=86400; path=/;";(0,s.Rb)(window.sat.cookieDomain)&&(a+="domain="+window.sat.cookieDomain+";"),document.cookie=a}catch(t){i.P.log("sat user exception",t)}if(null===r)return i.P.log("get user data - fail - invalid data",JSON.stringify(e)),void t.reject("invalid");t.resolve(r)})).fail((function(e,r,n){i.P.log("get user data - fail - connection problem",{http_status:e.status,ajax_status:r,ajax_error:n}),t.reject("connection problem")})),t}().done((function(r){t.isLoading=!1,function(t){u(t.raw);try{var e=JSON.stringify(t.raw);window.sessionStorage.setItem(y,e)}catch(t){}}(r),t.userData=r,t._resolveAllCallbacks(r),e.resolve(r)})).fail((function(r){t.isLoading=!1,t.userData=null,t._rejectAllCallbacks(r),e.reject(r)})),e)}},{key:"getUserDataCached",value:function(){var t=c.Deferred();return null!==this.getUserDataFromSessionStorage()?(t.resolve(this.getUserDataFromSessionStorage()),t):null!==this.getUserDataFromSessionStorage()?(t.resolve(this.userData),t):this.getUserData()}},{key:"getUserDataFromSessionStorage",value:function(){return function(){try{var t=window.sessionStorage.getItem(y),e=JSON.parse(t);return new d(e)}catch(t){}return null}()}}]),t}())},51:function(t,e,r){var n={"./ar.js":1690,"./de.js":7081,"./en.js":8825,"./es.js":4507,"./fr.js":6550,"./hi.js":657,"./id.js":9655,"./it.js":2578,"./pt.js":9384,"./ru.js":2269,"./vi.js":3961,"./zh.js":2510};function a(t){return i(t).then(r)}function i(t){return Promise.all([r.e(6755),r.e(9537)]).then((function(){if(!r.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}))}a.keys=function(){return Object.keys(n)},a.resolve=i,a.id=51,t.exports=a}}]);